### 并行计算的误区与常见错误
#### 1. 核用得越多，计算速度越快？
**回答**：不一定。首先要弄清楚并行计算的基本原理：所谓并行计算，就是把一个计算任务分割成几部分，交给不同的计算单元去计算。

以LAMMPS为例，每计算一个时间步长，各核之间就要通信一次，以交换各核之间的边界原子的信息。那么在一个计算周期中的计算时间分为2部分：

    周期总时间T=计算时间T1+通信时间T2。

如下图所示，核数越多，各计算核心分配到的计算任务（原子数）越少，那么T1就会相应降低；另一方面，核与核之间的边界原子会随着核数的增加呈几何级数增加，通信时间也就会不断增加，T2则会急剧增大。因此，增加计算核数的后果是，T1减小，T2增大，总计算时间T=T1+T2不一定增大。只有当T1减小的部分，大于T2增大的部分，这样的计算才是加速的，否则计算反而会变慢。

为了减小T2，建设集群需要花费大量资金购买Infiniband交换机，这是为了尽可能地降低通信的延迟，从而降低通信时间。

所以，并不是核数用得越多，计算速度越快，当核数多到一定程度的时候，计算速度反而有所下降，甚至还会引起其他的问题，比如说计算卡死。

<div  align="center">    
<img src="images/并行计算常见误区1.png" width = "300" height = "300" alt="图片名称" align=center />
</div>
